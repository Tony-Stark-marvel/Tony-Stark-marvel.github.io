#### 使用相关文档

[casdoor]: https://casdoor.org/zh/docs/overview#casdoor-%E7%9A%84%E7%89%B9%E6%80%A7

启动时会启动多个协程将routers文件夹下的router注册的路由注册进去。执行init方法

### GMP模型

- G: Gourtines（携带任务）, 每个Goroutine对应一个G结构体，G保存Goroutine的运行堆栈，即并发任务状态。G并非执行体，每个G需要绑定到P才能被调度执行。
- P: Processors（分配任务）, 对G来说，P相当于CPU核，G只有绑定到P(在P的local runq中)才能被调度。对M来说，P提供了相关的执行环境(Context)，如内存分配状态(mcache)，任务队列(G)等
- M: Machine（寻找任务）, OS线程抽象，负责调度任务，和某个P绑定，从P的runq中不断取出G，切换堆栈并执行，M本身不具备执行状态，在需要任务切换时，M将堆栈状态写回G，任何其它M都能据此恢复执行。



### CAS协议

CAS是Central Authentication Service的缩写，中央认证服务，一种独立开放指令协议

1、开源的企业级单点登录解决方案。

2、CAS Server 为需要独立部署的 Web 应用。

3、CAS Client 支持非常多的客户端(这里指单点登录系统中的各个 Web 应用)，包括 Java, .Net, PHP, Perl, Apache, uPortal, Ruby 等语言编写的各种web应用。

4、CAS属于Apache 2.0许可证，允许代码修改，再发布（作为开源或商业软件）。

#### CAS流程

CAS是怎么操作的呢?或则是KRB(Kerberos)怎么操作的呢?
他并不是很复杂,他先是建立一个 专门认证用户的 服务(SERVER) 这个服务只做一件事,负责验证用户的ID和PASS 是否是正确,在正确的情况提供用户一个名为TGT的票据,
相当你要去游乐场玩,首先你要在门口检查你的身份(即CHECK 你的ID和PASS),如果你通过验证,游乐场的门卫(AS)即提供给你一张门卡(TGT).
这张卡片的用处就是告诉 游乐场的各个场所,你是通过正门进来,而不是后门偷爬进来的,并且也是获取进入场所一把钥匙.
好的,现在你有张卡,但是这对你来不重要,因为你来游乐场不是为了拿这张卡的,好的,我们向你的目的出发, 恩,你来到一个摩天楼,你想进入玩玩,
这时摩天轮的服务员(client)拦下你,向你要求摩天轮的(ST)票据,你说你只有一个门卡(TGT),好的,那你只要把TGT放在一旁的票据授权机(TGS)上刷一下,
票据授权机(TGS)就根据你现在所在的摩天轮,给你一张摩天轮的票据(ST),哈,你有摩天轮的票据, 现在你可以畅通无阻的进入摩天轮里游玩了.
当然如果你玩完摩天轮后,想去游乐园的咖啡厅休息下,那你一样只要带着那张门卡(TGT).到相应的咖啡厅的票据授权机(TGS)刷一下,得到咖啡厅的票据(ST)就可以进入咖啡厅
当你离开游乐场后,想用这张TGT去刷打的回家的费用,呵呵,对不起,你的TGT已经过期了,在你离开游乐场那刻开始,你的TGT就已经销毁了

![image-20220818170820029](images\image-20220818170820029.png)

[CAS单点登陆流程]: https://www.cnblogs.com/fkxiaozhou/p/15180917.html

![image-20220823150325122](images\image-20220823150325122.png)

cas认证成功后返回字段无法对应

![QQ截图20220823144530](images\QQ截图20220823144530.png)

修改casdoor返回的cas认证参数，与后端字段对应

对相关字段进行修改适配后端显示

修改cas字段

是否可以把这些信息迁移到casdoor的数据库中？

修改记录

![image-20220824145339203](images\image-20220824145339203.png)

修改实体类

![image-20220824145437009](images\image-20220824145437009.png)

增加相关包

![image-20220824150735942](images\image-20220824150735942.png)

本机测试字段正确

![image-20220825091916365](images\image-20220825091916365.png)

线上请求错误

![image-20220825091951640](images\image-20220825091951640.png)

![image-20220825095036698](images\image-20220825095036698.png)

#### image起名应见名知义

```
#修改配置文件
vim fofa.so/fofav4/config.test.yaml
```

```
#修改相关docker配置文件
vim docker-compose.yml
```

![image-20220825121857910](images\image-20220825121857910.png)

对于重定向界面处理代理参数

![image-20220825123231300](images\image-20220825123231300.png)

重新配置hosts

oSWE11V6bP_11oHeuhE0bCozMGFg

### 问题

![image-20220825160858234](images\image-20220825160858234.png)

此方法进入

![image-20220825160921144](images\image-20220825160921144.png)

他又进行了追加并返回，所以并不是对原对象追加，而是返回了一个新对象，所以原有写法不正确

![image-20220825161032589](images\image-20220825161032589.png)

![image-20220902093903190](images\image-20220902093903190.png)

应拿到之后再次接收

微信登陆会出现创建用户账号

首次用微信账号登陆后，再用邮箱注册后绑定微信，需要先进行解绑原先微信账号登陆的账号后进行绑定。

微信登陆账号没有密码，只能通过微信扫码登陆

邮箱可绑定多个账号？

其他平台 如：

```
https://www.binahao.com/
```

网站在进行过微信登陆时应先解绑再进行微信第三方登陆

### 邮箱修改方法

![image-20220829180354566](images\image-20220829180354566.png)

### 判断email是否存在

![image-20220829181014639](images\image-20220829181014639.png)

### 修改密码

输入邮箱 --> 邮箱发送验证码->输入验证码通过-->修改密码

XML不允许出现特殊字符

| 特殊字符 | 代替符号 | 特殊原因                 |
| -------- | -------- | ------------------------ |
| &        | amp      | 每一个代表符号的开头字符 |
| >        | gt;      | 标记的结束字符           |
| <        | lt;      | 标记的开始字符           |
| "        | quot;    | 设定属性值               |
| '        | apos;    | 设定属性值               |

在url格式需要进行转义否则在xml反序列化时会出现问题 如微博头像传回来的url带有&符号，导致xml解析失败

casdoor授权登陆操作时AuthBackend

![image-20220907163230924](images\image-20220907163230924.png)

json字段传入参数应全面准确，否则会报有未授权错误提示

链路追踪gf

### 几种授权服务

基于属性的访问控制（ABAC）

基于角色的访问控制（RBAC）

基于用户的访问控制（UBAC）

基于上下文的访问控制

基于规则的访问控制

基于时间的访问控制

通过服务提供者接口 (SPI) 支持自定义访问控制机制 (ACM)

### 链路追踪

### React

render相当于你想要再页面上展示的内容

#### 整个事件过程

![image-20220909105231092](images\image-20220909105231092.png)

#### 生命周期

- Mounting(挂载)：已插入真实 DOM
- Updating(更新)：正在被重新渲染
- Unmounting(卸载)：已移出真实 DOM

##### 挂载生命周期调用顺序

当组件实例被创建并插入 DOM 中时，其生命周期调用顺序如下：

- `constructor()`: 在 React 组件挂载之前，会调用它的构造函数。
- `getDerivedStateFromProps()`: 在调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用。
- `render()`: render() 方法是 class 组件中唯一必须实现的方法。
- `componentDidMount()`: 在组件挂载后（插入 DOM 树中）立即调用。

constructor相当于在进行类的初始化操作，React.Component 子类实现构造函数时，应在其他语句之前前调用 super(props)

构造函数的使用情况：

- 通过给 this.state 赋值对象来初始化内部 state。
- 为事件处理函数绑定实例。

getDerivedStateFromProps() 会对组件传过来的参数进行处理，对模板进行赋值。

render相当于组件模板？ 对其进行渲染？

`componentDidMount` 会在DOM插入后进行执行

```
"@open_wechat") || strings.HasSuffix(email, "@weibo"
```

 time.NewTicker 需传入Duration类型参数  需对时间格式进行转换